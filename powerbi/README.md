# Power BI report guide (f1-fantasy-optimizer)

This repo is designed to be PowerBI-friendly: raw data is stored as long-format CSVs, and the pipeline will emit derived metrics/recommendations as CSVs.

## Recommended model (star schema)

### Dimensions
- **DimRound**: season + round + (optional) raceName/date
- **DimDriver**: driver id, abbreviation, name (optional)
- **DimConstructor**: constructor id, abbreviation, name (optional)

### Facts (long)
- **FactDriverPrices**: `f1fantasytools_prices_drivers_long.csv`
- **FactConstructorPrices**: `f1fantasytools_prices_constructors_long.csv`
- **FactDriverPoints**: `f1fantasytools_points_drivers_long.csv`
- **FactConstructorPoints**: `f1fantasytools_points_constructors_long.csv`

### Future facts (generated by the optimizer)
- `data/seasons/2025/derived/driver_metrics.csv`
- `data/seasons/2025/derived/constructor_metrics.csv`
- `data/seasons/2025/derived/team_recommendations.csv`

## Import steps (Power BI Desktop on Windows)

1) **Get Data → Text/CSV**
2) Pick each CSV in `data/seasons/2025/raw/`.
3) In Power Query:
   - Ensure `season` and `round` are Whole Number
   - Ensure `price`, `priceChange`, `totalPoints`, `nnTotalPoints` are Decimal/Whole Number
   - Replace literal `$undefined` with blank/null (Transform → Replace Values)
4) Create relationships:
   - DimRound[season+round] → Fact* [season+round]
   - DimDriver[id] → FactDriver* [id]
   - DimConstructor[id] → FactConstructor* [id]

## Suggested visuals

### Prices
- Line chart: Avg driver price by round
- Small multiples: price trend by driver
- Heatmap (matrix): driver vs round with price

### Points
- Line chart: totalPoints by round (driver/constructor)
- Bar chart: cumulative points by driver
- Scatter: price vs points (value)

### Optimizer outputs (once implemented)
- Table: recommended team per round
- Line: expected points vs actual points (if you later log actual)

## DAX measure ideas

See `powerbi/dax.md`.
